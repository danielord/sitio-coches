generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Vendedor {
  id            String   @id @default(cuid())
  nombre        String
  email         String   @unique
  telefono      String
  password      String
  fechaRegistro DateTime @default(now())
  coches        Coche[]
  
  @@map("vendedores")
}

model Coche {
  id           String      @id @default(cuid())
  marca        String
  modelo       String
  a√±o          Int
  precio       Float
  kilometraje  Int
  combustible  Combustible
  transmision  Transmision
  color        String
  descripcion  String      @db.Text
  imagenes     String[]
  vendedorId   String
  vendedor     Vendedor    @relation(fields: [vendedorId], references: [id])
  fechaCreacion DateTime   @default(now())
  activo       Boolean     @default(true)
  valoraciones Valoracion[]
  
  @@map("coches")
}

model Valoracion {
  id          String   @id @default(cuid())
  puntuacion  Int      // 1-5 estrellas
  comentario  String?  @db.Text
  nombreUsuario String
  emailUsuario  String
  cocheId     String
  coche       Coche    @relation(fields: [cocheId], references: [id])
  fechaCreacion DateTime @default(now())
  
  @@map("valoraciones")
}

enum Combustible {
  Gasolina
  Diesel
  Electrico
  Hibrido
}

enum Transmision {
  Manual
  Automatica
}